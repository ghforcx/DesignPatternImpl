# 桥接模式

桥接模式的核心思想是：将一个类内部可以分割的两部分的关系抽象为两个组件，通过组合而非继承的方式实现新的效果。

### 举例说明

`JdbcDriver` 需要实现两个功能：提供数据库连接的驱动部分以及日志输出部分。这两个功能可以分割。即：日志输出部分不关心使用的什么数据库，而驱动部分也不关心日志部分的具体实现。那么就可以把两部分分割。驱动部分通过 `AbstractDriver` 规定其方法，以及持有一个 `MockLogger` 对象。而日志部分通过 `MockLogger` 接口规定了日志记录行为，日志部分不同的实现只需在构造 `Driver` 对象时作为参数传入即可。

这样使用的好处是：如果有3种不同的数据库和4种不同的日志记录器，那么不再需要创建 3 * 4 = 12 种子类，而只需分别实现3种数据库的驱动和4种日志记录器的实现即可。

测试类为：`BridgeTest`.

### 优缺点

优点：

1. 将子类数量从 O(mn) 降低到了 O(m + n)。
2. 将职责分割，实现了单一职责原则。
3. 提高了系统的扩展性，任意组件维度的扩展均不需要修改原有系统。
4. 实现了依赖倒置原则，实现细节对用户透明。
5. 实现了组合继承原则。

缺点是应用场景受限。将类似示例中 `Driver` 的部分称为业务逻辑，将类似 `MockLogger` 的部分称为组件。具体来说有：

1. 业务逻辑和组件必须有一定的耦合度，如果组件的使用集中在函数的开头和结尾，并且同业务逻辑无关，那么通过 AOP 实现更加方便简洁。
2. 业务逻辑和组件必须可分离，如果不可分离，那么只能创建多个子类。

### 应用场景

- 用于举例的 Jdbc 驱动
- Java 通过 JVM 实现了平台无关性
- 其他需要组合的场景

# 参考资料

- https://en.wikipedia.org/wiki/Bridge_pattern
- https://www.liaoxuefeng.com/wiki/1252599548343744/1281319266943009
- https://www.bilibili.com/video/BV1mc411h719?p=8&vd_source=e4635d507eab7c10b4fd6ad41404eae6